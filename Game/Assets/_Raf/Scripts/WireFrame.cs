using UnityEngine;
using System.Collections;
public enum Type{
	Cube,
	Tile,
	Pyramid,
	Sphere,
}
public class WireFrame : MonoBehaviour {
	public float roughness = 0;
	public float thickness = 0;
	public Color color;
	public Type type;
	
	private LineRenderer c_lineRenderer;
	private Transform c_transform;
	private float maxDistance = 0;
	private Vector3 tempVector3;
	private WireFrameParent wfp;
	private bool hasParent=false;
	
	private Vector3 side1;
	private Vector3 side2;
	private Vector3 side3;
	private Vector3 side4;
	void Start () {
		c_lineRenderer=GetComponent<LineRenderer>();
		maxDistance=GameObject.FindGameObjectWithTag("Player").GetComponent<DetectNearObjects>().GetMaxVision();
		c_transform=transform;
		Vector3[] corner;
		switch(type){
		case Type.Cube:
			corner=new Vector3[35];
			c_lineRenderer.SetVertexCount(35);
			tempVector3.x=-0.5f;
			tempVector3.y=-0.5f;
			tempVector3.z=-0.5f;
			corner[0]=tempVector3;
			tempVector3.y=0.4999f;
			corner[1]=tempVector3;
			tempVector3.y=0.5f;
			corner[2]=tempVector3;
			tempVector3.x=0.4999f;
			corner[3]=tempVector3;
			tempVector3.x=0.5f;
			corner[4]=tempVector3;
			tempVector3.y=-0.4999f;
			corner[5]=tempVector3;
			tempVector3.y=-0.5f;
			corner[6]=tempVector3;
			tempVector3.z=0.4999f;
			corner[7]=tempVector3;
			tempVector3.z=0.5f;
			corner[8]=tempVector3;
			tempVector3.y=0.4999f;
			corner[9]=tempVector3;
			tempVector3.y=0.5f;
			corner[10]=tempVector3;
			tempVector3.z=-0.4999f;
			corner[11]=tempVector3;
			tempVector3.z=-0.5f;
			corner[12]=tempVector3;
			tempVector3.y=-0.4999f;
			corner[13]=tempVector3;
			tempVector3.y=-0.5f;
			corner[14]=tempVector3;
			tempVector3.x=-0.4999f;
			corner[15]=tempVector3;
			tempVector3.x=-0.5f;
			corner[16]=tempVector3;
			tempVector3.y=0.4999f;
			corner[17]=tempVector3;
			tempVector3.y=0.5f;
			corner[18]=tempVector3;
			tempVector3.z=0.4999f;
			corner[19]=tempVector3;
			tempVector3.z=0.5f;
			corner[20]=tempVector3;
			tempVector3.y=-0.4999f;
			corner[21]=tempVector3;
			tempVector3.y=-0.5f;
			corner[22]=tempVector3;
			tempVector3.x=0.4999f;
			corner[23]=tempVector3;
			tempVector3.x=0.5f;
			corner[24]=tempVector3;
			tempVector3.y=0.4999f;
			corner[25]=tempVector3;
			tempVector3.y=0.5f;
			corner[26]=tempVector3;
			tempVector3.x=-0.4999f;
			corner[27]=tempVector3;
			tempVector3.x=-0.5f;
			corner[28]=tempVector3;
			tempVector3.y=-0.4999f;
			corner[29]=tempVector3;
			tempVector3.y=-0.5f;
			corner[30]=tempVector3;
			tempVector3.z=-0.4999f;
			corner[31]=tempVector3;
			tempVector3.z=-0.5f;
			corner[32]=tempVector3;
			tempVector3.y=0.4999f;
			corner[33]=tempVector3;
			tempVector3.y=0.5f;
			corner[34]=tempVector3;
			for(int i=0 ; i<corner.Length ; i++) c_lineRenderer.SetPosition(i, corner[i]);
			break;
		case Type.Tile:
			c_lineRenderer.SetVertexCount(9);
			corner=new Vector3[9];
			tempVector3.x=0.5f;
			tempVector3.y=0.5f;
			tempVector3.z=0;
			corner[0]=tempVector3;
			tempVector3.y=-0.4999f;
			corner[1]=tempVector3;
			tempVector3.y=-0.5f;
			corner[2]=tempVector3;
			tempVector3.x=-0.4999f;
			corner[3]=tempVector3;
			tempVector3.x=-0.5f;
			corner[4]=tempVector3;
			tempVector3.y=0.4999f;
			corner[5]=tempVector3;
			tempVector3.y=0.5f;
			corner[6]=tempVector3;
			tempVector3.x=0.4999f;
			corner[7]=tempVector3;
			tempVector3.x=0.5f;
			corner[8]=tempVector3;
			for(int i=0 ; i<corner.Length ; i++) c_lineRenderer.SetPosition(i, corner[i]);	
			break;
		case Type.Pyramid:
			break;
		case Type.Sphere:
			c_lineRenderer.SetVertexCount(98);
			corner=new Vector3[98];
			
			float radiance=Mathf.Deg2Rad;
			float cosA=Mathf.Cos(radiance*15)/2;
			float sinA=Mathf.Sin(radiance*15)/2;
			float cosB=Mathf.Cos(radiance*30)/2;
			float sinB=Mathf.Sin(radiance*30)/2;
			float cosC=Mathf.Cos(radiance*45)/2;
			float sinC=Mathf.Sin(radiance*45)/2;
			float cosD=Mathf.Cos(radiance*60)/2;
			float sinD=Mathf.Sin(radiance*60)/2;
			float cosE=Mathf.Cos(radiance*75)/2;
			float sinE=Mathf.Sin(radiance*75)/2;
			
			tempVector3.x=0;
			tempVector3.y=.5f;
			tempVector3.z=0;
			corner[0]=tempVector3;
			tempVector3.x=cosE;
			tempVector3.y=sinE;
			corner[1]=tempVector3;
			tempVector3.x=cosD;
			tempVector3.y=sinD;
			corner[2]=tempVector3;
			tempVector3.x=cosC;
			tempVector3.y=sinC;
			corner[3]=tempVector3;
			tempVector3.x=cosB;
			tempVector3.y=sinB;
			corner[4]=tempVector3;
			tempVector3.x=cosA;
			tempVector3.y=sinA;
			corner[5]=tempVector3;
			tempVector3.x=.5f;
			tempVector3.y=0;
			corner[6]=tempVector3;
			tempVector3.x=cosA;
			tempVector3.y=-sinA;
			corner[7]=tempVector3;
			tempVector3.x=cosB;
			tempVector3.y=-sinB;
			corner[8]=tempVector3;
			tempVector3.x=cosC;
			tempVector3.y=-sinC;
			corner[9]=tempVector3;
			tempVector3.x=cosD;
			tempVector3.y=-sinD;
			corner[10]=tempVector3;
			tempVector3.x=cosE;
			tempVector3.y=-sinE;
			corner[11]=tempVector3;
			tempVector3.x=0;
			tempVector3.y=-.5f;
			corner[12]=tempVector3;
			tempVector3.x=-cosE;
			tempVector3.y=-sinE;
			corner[13]=tempVector3;
			tempVector3.x=-cosD;
			tempVector3.y=-sinD;
			corner[14]=tempVector3;
			tempVector3.x=-cosC;
			tempVector3.y=-sinC;
			corner[15]=tempVector3;
			tempVector3.x=-cosB;
			tempVector3.y=-sinB;
			corner[16]=tempVector3;
			tempVector3.x=-cosA;
			tempVector3.y=-sinA;
			corner[17]=tempVector3;
			tempVector3.x=-.5f;
			tempVector3.y=0;
			corner[18]=tempVector3;
			tempVector3.x=-cosA;
			tempVector3.y=sinA;
			corner[19]=tempVector3;
			tempVector3.x=-cosB;
			tempVector3.y=sinB;
			corner[20]=tempVector3;
			tempVector3.x=-cosC;
			tempVector3.y=sinC;
			corner[21]=tempVector3;
			tempVector3.x=-cosD;
			tempVector3.y=sinD;
			corner[22]=tempVector3;
			tempVector3.x=-cosE;
			tempVector3.y=sinE;
			corner[23]=tempVector3;
			tempVector3.x=0;
			tempVector3.y=.5f;
			corner[24]=tempVector3;
			tempVector3.x=0.091506f;
			tempVector3.y=0.482963f;
			tempVector3.z=-0.09150602f;
			corner[25]=tempVector3;
			tempVector3.x=0.176777f;
			tempVector3.y=0.433013f;
			tempVector3.z=-0.176777f;
			corner[26]=tempVector3;
			tempVector3.x=.25f;
			tempVector3.y=0.353553f;
			tempVector3.z=-.25f;
			corner[27]=tempVector3;
			tempVector3.x=0.306186f;
			tempVector3.y=.25f;
			tempVector3.z=-0.3061861f;
			corner[28]=tempVector3;
			tempVector3.x=0.341506f;
			tempVector3.y=0.12941f;
			tempVector3.z=-0.3415061f;
			corner[29]=tempVector3;
			tempVector3.x=0.353553f;
			tempVector3.y=0;
			tempVector3.z=-0.3535531f;
			corner[30]=tempVector3;
			tempVector3.x=0.341506f;
			tempVector3.y=-0.12941f;
			tempVector3.z=-0.3415061f;
			corner[31]=tempVector3;
			tempVector3.x=0.306186f;
			tempVector3.y=-.25f;
			tempVector3.z=-0.3061861f;
			corner[32]=tempVector3;
			tempVector3.x=.25f;
			tempVector3.y=-0.353553f;
			tempVector3.z=-.25f;
			corner[33]=tempVector3;
			tempVector3.x=0.176777f;
			tempVector3.y=-0.433013f;
			tempVector3.z=-0.176777f;
			corner[34]=tempVector3;
			tempVector3.x=0.091506f;
			tempVector3.y=-0.482963f;
			tempVector3.z=-0.09150602f;
			corner[35]=tempVector3;
			tempVector3.x=0;
			tempVector3.y=-0.5f;
			tempVector3.z=0;
			corner[36]=tempVector3;
			tempVector3.x=-0.091506f;
			tempVector3.y=-0.482963f;
			tempVector3.z=0.09150602f;
			corner[37]=tempVector3;
			tempVector3.x=-0.176777f;
			tempVector3.y=-0.433013f;
			tempVector3.z=0.176777f;
			corner[38]=tempVector3;
			tempVector3.x=-.25f;
			tempVector3.y=-0.353553f;
			tempVector3.z=.25f;
			corner[39]=tempVector3;
			tempVector3.x=-0.306186f;
			tempVector3.y=-.25f;
			tempVector3.z=0.3061861f;
			corner[40]=tempVector3;
			tempVector3.x=-0.341506f;
			tempVector3.y=-0.12941f;
			tempVector3.z=0.3415061f;
			corner[41]=tempVector3;
			tempVector3.x=-0.353553f;
			tempVector3.y=0;
			tempVector3.z=0.3535531f;
			corner[42]=tempVector3;
			tempVector3.x=-0.341506f;
			tempVector3.y=0.12941f;
			tempVector3.z=0.3415061f;
			corner[43]=tempVector3;
			tempVector3.x=-0.306186f;
			tempVector3.y=.25f;
			tempVector3.z=0.3061861f;
			corner[44]=tempVector3;
			tempVector3.x=-.25f;
			tempVector3.y=0.353553f;
			tempVector3.z=.25f;
			corner[45]=tempVector3;
			tempVector3.x=-0.176777f;
			tempVector3.y=0.433013f;
			tempVector3.z=0.176777f;
			corner[46]=tempVector3;
			tempVector3.x=-0.091506f;
			tempVector3.y=0.482963f;
			tempVector3.z=0.09150602f;
			corner[47]=tempVector3;
			tempVector3.x=0;
			tempVector3.y=0.5f;
			tempVector3.z=0;
			corner[48]=tempVector3;
			tempVector3.z=0;
			tempVector3.y=.5f;
			tempVector3.x=.0001f;
			corner[49]=tempVector3;
			tempVector3.z=-cosE;
			tempVector3.y=sinE;
			tempVector3.x=0;
			corner[50]=tempVector3;
			tempVector3.z=-cosD;
			tempVector3.y=sinD;
			corner[51]=tempVector3;
			tempVector3.z=-cosC;
			tempVector3.y=sinC;
			corner[52]=tempVector3;
			tempVector3.z=-cosB;
			tempVector3.y=sinB;
			corner[53]=tempVector3;
			tempVector3.z=-cosA;
			tempVector3.y=sinA;
			corner[54]=tempVector3;
			tempVector3.z=-.5f;
			tempVector3.y=0;
			corner[55]=tempVector3;
			tempVector3.z=-cosA;
			tempVector3.y=-sinA;
			corner[56]=tempVector3;
			tempVector3.z=-cosB;
			tempVector3.y=-sinB;
			corner[57]=tempVector3;
			tempVector3.z=-cosC;
			tempVector3.y=-sinC;
			corner[58]=tempVector3;
			tempVector3.z=-cosD;
			tempVector3.y=-sinD;
			corner[59]=tempVector3;
			tempVector3.z=-cosE;
			tempVector3.y=-sinE;
			corner[60]=tempVector3;
			tempVector3.z=0;
			tempVector3.y=-.5f;
			corner[61]=tempVector3;
			tempVector3.z=cosE;
			tempVector3.y=-sinE;
			corner[62]=tempVector3;
			tempVector3.z=cosD;
			tempVector3.y=-sinD;
			corner[63]=tempVector3;
			tempVector3.z=cosC;
			tempVector3.y=-sinC;
			corner[64]=tempVector3;
			tempVector3.z=cosB;
			tempVector3.y=-sinB;
			corner[65]=tempVector3;
			tempVector3.z=cosA;
			tempVector3.y=-sinA;
			corner[66]=tempVector3;
			tempVector3.z=.5f;
			tempVector3.y=0;
			corner[67]=tempVector3;
			tempVector3.z=cosA;
			tempVector3.y=sinA;
			corner[68]=tempVector3;
			tempVector3.z=cosB;
			tempVector3.y=sinB;
			corner[69]=tempVector3;
			tempVector3.z=cosC;
			tempVector3.y=sinC;
			corner[70]=tempVector3;
			tempVector3.z=cosD;
			tempVector3.y=sinD;
			corner[71]=tempVector3;
			tempVector3.z=cosE;
			tempVector3.y=sinE;
			corner[72]=tempVector3;
			tempVector3.z=0;
			tempVector3.y=.5f;
			corner[73]=tempVector3;
			tempVector3.x=-0.091506f;
			tempVector3.y=0.482963f;
			tempVector3.z=-0.09150602f;
			corner[74]=tempVector3;
			tempVector3.x=-0.176777f;
			tempVector3.y=0.433013f;
			tempVector3.z=-0.176777f;
			corner[75]=tempVector3;
			tempVector3.x=-.25f;
			tempVector3.y=0.353553f;
			tempVector3.z=-.25f;
			corner[76]=tempVector3;
			tempVector3.x=-0.306186f;
			tempVector3.y=.25f;
			tempVector3.z=-0.3061861f;
			corner[77]=tempVector3;
			tempVector3.x=-0.341506f;
			tempVector3.y=0.12941f;
			tempVector3.z=-0.3415061f;
			corner[78]=tempVector3;
			tempVector3.x=-0.353553f;
			tempVector3.y=0;
			tempVector3.z=-0.3535531f;
			corner[79]=tempVector3;
			tempVector3.x=-0.341506f;
			tempVector3.y=-0.12941f;
			tempVector3.z=-0.3415061f;
			corner[80]=tempVector3;
			tempVector3.x=-0.306186f;
			tempVector3.y=-.25f;
			tempVector3.z=-0.3061861f;
			corner[81]=tempVector3;
			tempVector3.x=-.25f;
			tempVector3.y=-0.353553f;
			tempVector3.z=-.25f;
			corner[82]=tempVector3;
			tempVector3.x=-0.176777f;
			tempVector3.y=-0.433013f;
			tempVector3.z=-0.176777f;
			corner[83]=tempVector3;
			tempVector3.x=-0.091506f;
			tempVector3.y=-0.482963f;
			tempVector3.z=-0.09150602f;
			corner[84]=tempVector3;
			tempVector3.x=0;
			tempVector3.y=-0.5f;
			tempVector3.z=0;
			corner[85]=tempVector3;
			tempVector3.x=0.091506f;
			tempVector3.y=-0.482963f;
			tempVector3.z=0.09150602f;
			corner[86]=tempVector3;
			tempVector3.x=0.176777f;
			tempVector3.y=-0.433013f;
			tempVector3.z=0.176777f;
			corner[87]=tempVector3;
			tempVector3.x=.25f;
			tempVector3.y=-0.353553f;
			tempVector3.z=.25f;
			corner[88]=tempVector3;
			tempVector3.x=0.306186f;
			tempVector3.y=-.25f;
			tempVector3.z=0.3061861f;
			corner[89]=tempVector3;
			tempVector3.x=0.341506f;
			tempVector3.y=-0.12941f;
			tempVector3.z=0.3415061f;
			corner[90]=tempVector3;
			tempVector3.x=0.353553f;
			tempVector3.y=0;
			tempVector3.z=0.3535531f;
			corner[91]=tempVector3;
			tempVector3.x=0.341506f;
			tempVector3.y=0.12941f;
			tempVector3.z=0.3415061f;
			corner[92]=tempVector3;
			tempVector3.x=0.306186f;
			tempVector3.y=.25f;
			tempVector3.z=0.3061861f;
			corner[93]=tempVector3;
			tempVector3.x=.25f;
			tempVector3.y=0.353553f;
			tempVector3.z=.25f;
			corner[94]=tempVector3;
			tempVector3.x=0.176777f;
			tempVector3.y=0.433013f;
			tempVector3.z=0.176777f;
			corner[95]=tempVector3;
			tempVector3.x=0.091506f;
			tempVector3.y=0.482963f;
			tempVector3.z=0.09150602f;
			corner[96]=tempVector3;
			tempVector3.x=0;
			tempVector3.y=0.5f;
			tempVector3.z=0;
			corner[97]=tempVector3;
			print (corner[95]);
			for(int i=0 ; i<corner.Length ; i++) c_lineRenderer.SetPosition(i, corner[i]);	
			break;
		}
		tempVector3=Vector3.one;
	}
	
	public void SetWireFrame(float distance){
		if(c_lineRenderer){
			tempVector3.x=((maxDistance-distance)/maxDistance)*thickness;
			c_lineRenderer.SetWidth(tempVector3.x, tempVector3.x);
			tempVector3.x=roughness*Random.value*3;
			Debug.Log(tempVector3);
			c_lineRenderer.sharedMaterial.mainTextureScale = tempVector3;
		}
	}
	
	public bool HasParent(){
		return hasParent;	
	}
	
	public void SetParent(WireFrameParent wfp){
		this.wfp=wfp;
		hasParent=true;
	}
	
	public WireFrameParent GetParent(){
		return wfp;
	}
}
